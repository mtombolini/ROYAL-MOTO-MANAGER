{% extends './layout.html' %}

{% block title %}RMM | Carro de Compras{% endblock %}

{% block body %}
{% include 'header.html' %}

<div class="text-center" style="margin-top: 20px;">
    <!-- Spinner de Bootstrap y Mensaje -->
    <p>
        Obteniendo estado de la solicitud...
        <span class="spinner-border text-light" role="status" aria-hidden="true" style="margin-left: 8px;">
            <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Spinner" width="40" height="24" class="centered-image">
        </span>
    </p>
    <p>Tiempo transcurrido: <span id="timer">0</span> segundos</p>
    

    <!-- Botón para duplicar a inicio -->
    <a href="{{ url_for('home.home') }}" target="_blank" class="btn btn-primary">Ir a Inicio</a>

    <!-- Botón de Reinicio -->
    <button onclick="restartProcess()" class="btn btn-secondary">Reiniciar Proceso</button>
</div>

<script>
    var timeElapsed = 0;
    var timerInterval = setInterval(function() {
        timeElapsed++;
        document.getElementById('timer').innerText = timeElapsed;
    }, 1000);

    function restartProcess() {
        // Recargar la página o redirigir a la ruta que inicia el proceso
        window.location.href = "{{ url_for('api_call.run_api_calls') }}";
    }
</script>

{% endblock %}